import{_ as B,C,j as U,i as u,h as z,E as T,c as n,o as s,q as l,v as w,t as Q,F as q,B as x,x as _,b as M,G as N,y as I,H as D,D as R}from"./quizStorage-CannCaN0.js";const V={class:"blocked-page"},E=["disabled"],L={key:0},F={key:0},K=["value"],S={key:1,class:"short-answer-input"},j={key:2},G={key:1},H={class:"unblock-timer"},W={__name:"Blocked",setup(J){const{quizzes:k}=C();U(k,t=>{t&&t.length>0&&f()});const i=u(null),c=u([]),d=u(""),h=u(null),p=u(!1),m=u(0),v=u(0),g=z(()=>k.value.filter(t=>t.enabled));function f(){if(g.value.length===0){i.value=null,c.value=[];return}const t=g.value[Math.floor(Math.random()*g.value.length)];if(!t.data||t.data.length===0){i.value=null,c.value=[];return}const e=t.data[Math.floor(Math.random()*t.data.length)];i.value=e,c.value=e.choices||[]}function b(t){if(!c.value||!d.value){h.value=null;return}const e=d.value.toLowerCase()===i.value.answer.toLowerCase();h.value=e,e&&browser.storage.local.get(["blockedUrl","temporarilyAllowed"]).then(o=>{const a=o.blockedUrl,r=o.temporarilyAllowed||[];console.log("[Blocked] Redirecting to:",a),r.push(a),browser.storage.local.set({temporarilyAllowed:r}).then(()=>{window.location.href=a})})}function y(){f(),p.value=!0,m.value=5;const e=setInterval(()=>{m.value-=1,m.value<=0&&(clearInterval(e),p.value=!1)},1e3)}function A(){v.value=60;const e=setInterval(()=>{v.value-=1,v.value<=0&&(clearInterval(e),v.value=0,browser.storage.local.get(["blockedUrl","temporarilyAllowed"]).then(o=>{const a=o.blockedUrl,r=o.temporarilyAllowed||[];console.log("[Blocked] Redirecting to:",a),r.push(a),browser.storage.local.set({temporarilyAllowed:r}).then(()=>{window.location.href=a})}))},1e3)}return T(()=>{k.value.length>0&&f(),A()}),(t,e)=>(s(),n("div",V,[e[3]||(e[3]=l("h1",null,"Blocked",-1)),l("button",{disabled:p.value,onClick:y},w(p.value?`Wait ${m.value} seconds`:"New Question"),9,E),i.value?(s(),n("div",L,[l("h2",null,w(i.value.question),1),c.value.length?(s(),n("ul",F,[(s(!0),n(q,null,x(c.value,(o,a)=>(s(),n("li",{key:a},[l("label",null,[_(l("input",{type:"radio",value:o,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),name:"quiz-options",onChange:b},null,40,K),[[N,d.value]]),M(" "+w(o),1)])]))),128))])):(s(),n("div",S,[l("span",null,[_(l("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),placeholder:"Enter your answer",onKeyup:D(b,["enter"])},null,544),[[I,d.value]]),l("button",{onClick:b},"Check Answer")])])),h.value!==null?(s(),n("p",j,w(h.value?"Correct!":"Incorrect. Try again."),1)):Q("",!0)])):(s(),n("div",G,e[2]||(e[2]=[l("h2",null,"No quizzes available",-1)]))),l("div",H,[l("h2",null,"Unblock in: "+w(v.value),1)])]))}},$=B(W,[["__scopeId","data-v-964e82f6"]]);R($).mount("#app");
