import{_ as M,C as Q,j as q,i as r,h as x,E as I,c as a,o as s,q as l,v as h,t as N,F as D,B as R,x as A,b as E,G as L,y as V,H as K,I as j,D as F}from"./quizStorage-BNnIXu_S.js";const S={class:"blocked-page"},G=["disabled"],H={key:0},W={key:0},$=["value"],J={key:1,class:"short-answer-input"},O=["onKeyup"],P={key:2},X={key:1},Y={class:"unblock-timer"},Z={__name:"Blocked",setup(te){const{quizzes:f}=Q();q(f,t=>{t&&t.length>0&&g()});const u=r(null),i=r([]),c=r(""),p=r(null),w=r(!1),m=r(0),v=r(0),k=x(()=>f.value.filter(t=>t.enabled));function g(){if(k.value.length===0){u.value=null,i.value=[];return}const t=k.value[Math.floor(Math.random()*k.value.length)];if(!t.data||t.data.length===0){u.value=null,i.value=[];return}const e=t.data[Math.floor(Math.random()*t.data.length)];u.value=e,i.value=e.choices||[]}function _(){if(!i.value||!c.value){p.value=null;return}const t=c.value.toLowerCase()===u.value.answer.toLowerCase();p.value=t,t&&browser.storage.local.get(["blockedUrl","temporarilyAllowed","sites"]).then(e=>{const o=e.blockedUrl,n=e.temporarilyAllowed||[],d=e.sites||[];console.log("[Blocked] Redirecting to:",o);const U=new URL(o).hostname,b=d.find(y=>typeof y=="object"&&U.includes(y.name)),z=(b.hours||0)*60*60+(b.minutes||0)*60,T=Date.now()+z*1e3;n.push({url:o,expiresAt:T}),browser.storage.local.set({temporarilyAllowed:n}).then(()=>{window.location.href=o})})}function B(){g(),w.value=!0,m.value=5;const e=setInterval(()=>{m.value-=1,m.value<=0&&(clearInterval(e),w.value=!1)},1e3)}function C(){v.value=60;const e=setInterval(()=>{v.value-=1,v.value<=0&&(clearInterval(e),v.value=0,browser.storage.local.get(["blockedUrl","temporarilyAllowed"]).then(o=>{const n=o.blockedUrl,d=o.temporarilyAllowed||[];console.log("[Blocked] Redirecting to:",n),d.push(n),browser.storage.local.set({temporarilyAllowed:d}).then(()=>{window.location.href=n})}))},1e3)}return I(()=>{f.value.length>0&&g(),C()}),(t,e)=>(s(),a("div",S,[e[3]||(e[3]=l("h1",null,"Blocked",-1)),l("button",{disabled:w.value,onClick:B},h(w.value?`Wait ${m.value} seconds`:"New Question"),9,G),u.value?(s(),a("div",H,[l("h2",null,h(u.value.question),1),i.value.length?(s(),a("ul",W,[(s(!0),a(D,null,R(i.value,(o,n)=>(s(),a("li",{key:n},[l("label",null,[A(l("input",{type:"radio",value:o,"onUpdate:modelValue":e[0]||(e[0]=d=>c.value=d),name:"quiz-options",onChange:_},null,40,$),[[L,c.value]]),E(" "+h(o),1)])]))),128))])):(s(),a("div",J,[l("span",null,[A(l("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o),placeholder:"Enter your answer",onKeyup:K(j(_,["prevent"]),["enter"])},null,40,O),[[V,c.value]]),l("button",{onClick:_},"Check Answer")])])),p.value!==null?(s(),a("p",P,h(p.value?"Correct!":"Incorrect. Try again."),1)):N("",!0)])):(s(),a("div",X,e[2]||(e[2]=[l("h2",null,"No quizzes available",-1)]))),l("div",Y,[l("h2",null,"Unblock in: "+h(v.value),1)])]))}},ee=M(Z,[["__scopeId","data-v-f8addc59"]]);F(ee).mount("#app");
